jsxs)("div",{style:{background:"white",padding:"1.5rem",borderRadius:"10px",boxShadow:"0 2px 10px rgba(0,0,0,0.1)",textAlign:"center",border:"2px solid #f59e0b"},children:[(0,en.jsx)("h4",{style:{color:"#f59e0b",marginBottom:"0.5rem"},children:"\ud83d\udc40 Views"}),(0,en.jsx)("p",{style:{fontSize:"2rem",fontWeight:"bold",color:"#1f2937",marginBottom:"0.5rem"},children:"156"}),(0,en.jsx)("p",{style:{fontSize:"0.8rem",color:"#f59e0b"},children:"\u2197\ufe0f +15% vs last period"})]}),(0,en.jsxs)("div",{style:{background:"white",padding:"1.5rem",borderRadius:"10px",boxShadow:"0 2px 10px rgba(0,0,0,0.1)",textAlign:"center",border:"2px solid #8b5cf6"},children:[(0,en.jsx)("h4",{style:{color:"#8b5cf6",marginBottom:"0.5rem"},children:"\ud83d\udd04 Conversion"}),(0,en.jsx)("p",{style:{fontSize:"2rem",fontWeight:"bold",color:"#1f2937",marginBottom:"0.5rem"},children:"14.7%"}),(0,en.jsx)("p",{style:{fontSize:"0.8rem",color:"#8b5cf6"},children:"\u2197\ufe0f +2.3% vs last period"})]})]}),(0,en.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr",gap:"2rem",marginBottom:"2rem"},children:[(0,en.jsxs)("div",{style:{background:"white",padding:"2rem",borderRadius:"10px",boxShadow:"0 2px 10px rgba(0,0,0,0.1)"},children:[(0,en.jsx)("h4",{style:{color:"#1f2937",marginBottom:"1.5rem"},children:"\ud83d\udcc8 Sales Performance"}),(0,en.jsxs)("div",{style:{height:"200px",background:"linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%)",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",position:"relative",overflow:"hidden"},children:[(0,en.jsx)("div",{style:{display:"flex",alignItems:"flex-end",height:"150px",gap:"8px"},children:[45,67,89,56,78,92,73].map((e,t)=>(0,en.jsx)("div",{style:{width:"30px",height:`${e}px`,background:"linear-gradient(135deg, #dc2626 0%, #b91c1c 100%)",borderRadius:"4px 4px 0 0",opacity:.8}},t))}),(0,en.jsx)("div",{style:{position:"absolute",bottom:"10px",left:"10px",fontSize:"0.8rem",color:"#6b7280"},children:"Last 7 Days"})]})]}),(0,en.jsxs)("div",{style:{background:"white",padding:"2rem",borderRadius:"10px",boxShadow:"0 2px 10px rgba(0,0,0,0.1)"},children:[(0,en.jsx)("h4",{style:{color:"#1f2937",marginBottom:"1.5rem"},children:"\ud83c\udfc6 Top Products"}),(0,en.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[{name:"Liberian Coffee Beans",sales:12,revenue:"$240"},{name:"Traditional Fabric",sales:8,revenue:"$320"},{name:"Palm Wine",sales:6,revenue:"$180"},{name:"Local Artwork",sales:4,revenue:"$400"}].map((e,t)=>(0,en.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.75rem",background:0===t?"#fef2f2":"#f9fafb",borderRadius:"8px",border:0===t?"1px solid #fecaca":"1px solid #e5e7eb"},children:[(0,en.jsxs)("div",{children:[(0,en.jsx)("p",{style:{fontWeight:"bold",color:"#1f2937",fontSize:"0.9rem",marginBottom:"0.25rem"},children:e.name}),(0,en.jsxs)("p",{style:{fontSize:"0.8rem",color:"#6b7280"},children:[e.sales," sales"]})]}),(0,en.jsx)("div",{style:{textAlign:"right"},children:(0,en.jsx)("p",{style:{fontWeight:"bold",color:"#10b981"},children:e.revenue})})]},t))})]})]}),(0,en.jsxs)("div",{style:{background:"white",padding:"2rem",borderRadius:"10px",boxShadow:"0 2px 10px rgba(0,0,0,0.1)",marginBottom:"2rem"},children:[(0,en.jsx)("h4",{style:{color:"#1f2937",marginBottom:"1.5rem"},children:"\ud83c\udfaf Customer Insights"}),(0,en.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"2rem"},children:[(0,en.jsxs)("div",{children:[(0,en.jsx)("h5",{style:{color:"#dc2626",marginBottom:"1rem"},children:"\ud83d\udccd Top Locations"}),(0,en.jsx)("ul",{style:{listStyle:"none",padding:0},children:[{city:"New York, NY",percentage:35},{city:"Los Angeles, CA",percentage:28},{city:"Washington, DC",percentage:22},{city:"Atlanta, GA",percentage:15}].map((e,t)=>(0,en.jsxs)("li",{style:{marginBottom:"0.5rem"},children:[(0,en.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,en.jsx)("span",{style:{fontSize:"0.9rem",color:"#1f2937"},children:e.city}),(0,en.jsxs)("span",{style:{fontSize:"0.8rem",color:"#6b7280"},children:[e.percentage,"%"]})]}),(0,en.jsx)("div",{style:{width:"100%",height:"4px",background:"#e5e7eb",borderRadius:"2px",marginTop:"0.25rem"},children:(0,en.jsx)("div",{style:{width:`${e.percentage}%`,height:"100%",background:"#dc2626",borderRadius:"2px"}})})]},t))})]}),(0,en.jsxs)("div",{children:[(0,en.jsx)("h5",{style:{color:"#dc2626",marginBottom:"1rem"},children:"\ud83d\udd52 Peak Hours"}),(0,en.jsx)("ul",{style:{listStyle:"none",padding:0},children:[{time:"2:00 PM - 4:00 PM",activity:"High"},{time:"7:00 PM - 9:00 PM",activity:"Very High"},{time:"10:00 AM - 12:00 PM",activity:"Medium"},{time:"8:00 PM - 10:00 PM",activity:"High"}].map((e,t)=>(0,en.jsxs)("li",{style:{marginBottom:"0.75rem",padding:"0.5rem",background:"#f9fafb",borderRadius:"6px",fontSize:"0.9rem"},children:[(0,en.jsx)("div",{style:{color:"#1f2937",fontWeight:"500"},children:e.time}),(0,en.jsxs)("div",{style:{color:"Very High"===e.activity?"#dc2626":"High"===e.activity?"#f59e0b":"#6b7280",fontSize:"0.8rem"},children:[e.activity," Activity"]})]},t))})]}),(0,en.jsxs)("div",{children:[(0,en.jsx)("h5",{style:{color:"#dc2626",marginBottom:"1rem"},children:"\ud83d\udd04 Repeat Customers"}),(0,en.jsxs)("div",{style:{textAlign:"center",padding:"1rem"},children:[(0,en.jsx)("div",{style:{width:"80px",height:"80px",borderRadius:"50%",background:"conic-gradient(#dc2626 0% 65%, #e5e7eb 65% 100%)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1rem",position:"relative"},children:(0,en.jsx)("div",{style:{width:"50px",height:"50px",borderRadius:"50%",background:"white",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold",color:"#1f2937"},children:"65%"})}),(0,en.jsx)("p",{style:{color:"#6b7280",fontSize:"0.8rem",marginBottom:"0.5rem"},children:"of customers return"}),(0,en.jsx)("p",{style:{color:"#10b981",fontSize:"0.8rem",fontWeight:"500"},children:"\u2197\ufe0f +5% this month"})]})]})]})]}),(0,en.jsxs)("div",{style:{background:"linear-gradient(135deg, #dc2626 0%, #b91c1c 100%)",color:"white",padding:"1.5rem",borderRadius:"10px",textAlign:"center"},children:[(0,en.jsx)("h4",{style:{marginBottom:"1rem"},children:"\ud83d\ude80 Recommended Actions"}),(0,en.jsxs)("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",flexWrap:"wrap"},children:[(0,en.jsx)("button",{style:{backgroundColor:"rgba(255,255,255,0.2)",color:"white",border:"1px solid rgba(255,255,255,0.3)",borderRadius:"8px",padding:"0.75rem 1rem",cursor:"pointer",fontSize:"0.9rem"},children:"\ud83d\udcc8 Boost Low-Performing Products"}),(0,en.jsx)("button",{style:{backgroundColor:"rgba(255,255,255,0.2)",color:"white",border:"1px solid rgba(255,255,255,0.3)",borderRadius:"8px",padding:"0.75rem 1rem",cursor:"pointer",fontSize:"0.9rem"},children:"\ud83c\udfaf Target Peak Hours"}),(0,en.jsx)("button",{style:{backgroundColor:"rgba(255,255,255,0.2)",color:"white",border:"1px solid rgba(255,255,255,0.3)",borderRadius:"8px",padding:"0.75rem 1rem",cursor:"pointer",fontSize:"0.9rem"},children:"\ud83d\udccd Expand to New Markets"})]})]})]});case"profile":return(0,en.jsx)(gn,{});default:return(0,en.jsx)("div",{children:(0,en.jsx)("p",{children:"Select a tab to view content."})})}})()})]})]})})},bn=e=>{let{onUploadComplete:t,existingImages:r=[],existingVideo:n=null}=e;const[o,i]=(0,a.useState)(!1),[s,l]=(0,a.useState)(0),[d,c]=(0,a.useState)(r),[u,p]=(0,a.useState)(n),[m,f]=(0,a.useState)(!1),h=(0,a.useRef)(null),g=(0,a.useRef)(null),x=async e=>{if(e&&0!==e.length){i(!0),l(0);try{const r=new FormData;Array.from(e).forEach(e=>{r.append("files",e)});const n=localStorage.getItem("auth_token"),o=await Xr.post("https://libtousa.com/api/products/upload-media",r,{headers:{Authorization:`Bearer ${n}`,"Content-Type":"multipart/form-data"},onUploadProgress:e=>{const t=Math.round(100*e.loaded/e.total);l(t)}});if(o.data.success){const e=o.data.images||[],r=o.data.video;c(t=>[...t,...e]),r&&p(r),t({images:[...d,...e],video:r||u}),l(100),setTimeout(()=>l(0),1e3)}}catch(o){var r,n;console.error("Upload failed:",o),alert((null===(r=o.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.detail)||"Upload failed. Please try again.")}i(!1)}},b=e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?f(!0):"dragleave"===e.type&&f(!1)};return(0,en.jsxs)("div",{style:{marginBottom:"2rem"},children:[(0,en.jsx)("h3",{style:{marginBottom:"1rem",color:"#1f2937"},children:"Product Media"}),(0,en.jsxs)("div",{onDragEnter:b,onDragLeave:b,onDragOver:b,onDrop:e=>{e.preventDefault(),e.stopPropagation(),f(!1),e.dataTransfer.files&&e.dataTransfer.files[0]&&x(e.dataTransfer.files)},style:{border:"2px dashed "+(m?"#dc2626":"#d1d5db"),borderRadius:"10px",padding:"2rem",textAlign:"center",backgroundColor:m?"#fef2f2":"#f9fafb",marginBottom:"1rem",transition:"all 0.3s"},children:[(0,en.jsx)("p",{style:{color:"#6b7280",marginBottom:"1rem"},children:"Drag and drop files here or click to select"}),(0,en.jsxs)("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",flexWrap:"wrap"},children:[(0,en.jsxs)("button",{type:"button",onClick:()=>{var e;return null===(e=h.current)||void 0===e?void 0:e.click()},disabled:o||d.length>=10,style:{padding:"0.75rem 1.5rem",backgroundColor:o||d.length>=10?"#9ca3af":"#1d4ed8",color:"white",border:"none",borderRadius:"5px",cursor:o||d.length>=10?"not-allowed":"pointer"},children:["\ud83d\udcf7 Add Images (",d.length,"/10)"]}),(0,en.jsxs)("button",{type:"button",onClick:()=>{var e;return null===(e=g.current)||void 0===e?void 0:e.click()},disabled:o||!!u,style:{padding:"0.75rem 1.5rem",backgroundColor:o||u?"#9ca3af":"#dc2626",color:"white",border:"none",borderRadius:"5px",cursor:o||u?"not-allowed":"pointer"},children:["\ud83c\udfa5 Add Video ",u?"(1/1)":"(0/1)"]})]})]}),(0,en.jsx)("input",{ref:h,type:"file",multiple:!0,accept:"image/*",onChange:e=>{const t=e.target.files;if(t&&t.length>0){if(d.length+t.length>10)return void alert("Maximum 10 images allowed per product");x(t)}},style:{display:"none"}}),(0,en.jsx)("input",{ref:g,type:"file",accept:"video/*",onChange:e=>{const t=e.target.files;if(t&&t.length>0){if(u)return void alert("Only one video allowed per product");x(t)}},style:{display:"none"}}),o&&(0,en.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,en.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem"},children:[(0,en.jsx)("span",{style:{color:"#6b7280"},children:"Uploading..."}),(0,en.jsxs)("span",{style:{color:"#6b7280"},children:[s,"%"]})]}),(0,en.jsx)("div",{style:{width:"100%",height:"8px",backgroundColor:"#e5e7eb",borderRadius:"4px",overflow:"hidden"},children:(0,en.jsx)("div",{style:{width:`${s}%`,height:"100%",backgroundColor:"#dc2626",transition:"width 0.3s"}})})]}),d.length>0&&(0,en.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,en.jsxs)("h4",{style:{marginBottom:"0.5rem",color:"#374151"},children:["Images (",d.length,"/10)"]}),(0,en.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(150px, 1fr))",gap:"1rem"},children:d.map((e,r)=>(0,en.jsxs)("div",{style:{position:"relative"},children:[(0,en.jsx)("img",{src:e,alt:`Product ${r+1}`,style:{width:"100%",height:"150px",objectFit:"cover",borderRadius:"8px",border:"1px solid #d1d5db"}}),(0,en.jsx)("button",{type:"button",onClick:()=>(e=>{const r=d.filter((t,r)=>r!==e);c(r),t({images:r,video:u})})(r),style:{position:"absolute",top:"5px",right:"5px",backgroundColor:"#dc2626",color:"white",border:"none",borderRadius:"50%",width:"24px",height:"24px",fontSize:"12px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:"\xd7"})]},r))})]}),u&&(0,en.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,en.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"},children:[(0,en.jsx)("h4",{style:{color:"#374151"},children:"Video (1/1)"}),(0,en.jsx)("button",{type:"button",onClick:()=>{p(null),t({images:d,video:null})},style:{backgroundColor:"#dc2626",color:"white",border:"none",borderRadius:"5px",padding:"0.25rem 0.5rem",fontSize:"0.8rem",cursor:"pointer"},children:"Remove Video"})]}),(0,en.jsx)("video",{src:u,controls:!0,style:{width:"100%",maxWidth:"400px",height:"auto",borderRadius:"8px",border:"1px solid #d1d5db"}})]})]})},yn=e=>{var t,r,n;let{product:o,onShippingCalculated:i}=e;const[s,l]=(0,a.useState)({destination_state:"",weight:(null===o||void 0===o?void 0:o.weight)||1,length:(null===o||void 0===o||null===(t=o.dimensions)||void 0===t?void 0:t.length)||10,width:(null===o||void 0===o||null===(r=o.dimensions)||void 0===r?void 0:r.width)||10,height:(null===o||void 0===o||null===(n=o.dimensions)||void 0===n?void 0:n.height)||10,value:(null===o||void 0===o?void 0:o.price)||100}),[d,c]=(0,a.useState)(!1),[u,p]=(0,a.useState)([]),[m,f]=(0,a.useState)(""),[h,g]=(0,a.useState)([]),[x,b]=(0,a.useState)(!0),y="https://libtousa.com",v=a.useCallback(async()=>{b(!0);try{console.log("Loading states from:",`${y}/api/shipping/zones`);const e=await Xr.get(`${y}/api/shipping/zones`);console.log("States API response:",e.data),e.data.success&&e.data.destination_zones&&e.data.destination_zones.states?(g(e.data.destination_zones.states),console.log("States loaded successfully:",e.data.destination_zones.states.length,"states")):(console.error("Invalid response format:",e.data),f("Failed to load destination states"))}catch(m){console.error("Failed to load states:",m),f("Failed to load destination states. Please try again.")}finally{b(!1)}},[y]);(0,a.useEffect)(()=>{v()},[v]);const w=e=>{const{name:t,value:r}=e.target;l(e=>({...e,[t]:r}))},j=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e);return(0,en.jsxs)("div",{style:{background:"white",padding:"1.5rem",borderRadius:"10px",boxShadow:"0 2px 10px rgba(0,0,0,0.1)",marginBottom:"2rem"},children:[(0,en.jsx)("h3",{style:{marginBottom:"1rem",color:"#1f2937"},children:"\ud83d\ude9a International Shipping Calculator"}),(0,en.jsx)("p",{style:{color:"#6b7280",marginBottom:"1.5rem",fontSize:"0.9rem"},children:"Calculate shipping costs from Liberia to any U.S. state with real-time rates from multiple carriers."}),(0,en.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[(0,en.jsxs)("div",{children:[(0,en.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",color:"#374151",fontSize:"0.9rem"},children:"Destination State *"}),(0,en.jsxs)("select",{name:"destination_state",value:s.destination_state,onChange:w,required:!0,disabled:x,style:{width:"100%",padding:"0.5rem",border:"1px solid #d1d5db",borderRadius:"5px",fontSize:"0.9rem",backgroundColor:x?"#f3f4f6":"white",cursor:x?"not-allowed":"pointer"},children:[(0,en.jsx)("option",{value:"",children:x?"Loading states...":"Select State"}),!x&&h.map(e=>(0,en.jsx)("option",{value:e.code,children:e.name},e.code))]})]}),(0,en.jsxs)("div",{children:[(0,en.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",color:"#374151",fontSize:"0.9rem"},children:"Weight (kg)"}),(0,en.jsx)("input",{type:"number",name:"weight",value:s.weight,onChange:w,min:"0.1",step:"0.1",style:{width:"100%",padding:"0.5rem",border:"1px solid #d1d5db",borderRadius:"5px",fontSize:"0.9rem"}})]}),(0,en.jsxs)("div",{children:[(0,en.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",color:"#374151",fontSize:"0.9rem"},children:"Length (cm)"}),(0,en.jsx)("input",{type:"number",name:"length",value:s.length,onChange:w,min:"1",step:"0.1",style:{width:"100%",padding:"0.5rem",border:"1px solid #d1d5db",borderRadius:"5px",fontSize:"0.9rem"}})]}),(0,en.jsxs)("div",{children:[(0,en.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",color:"#374151",fontSize:"0.9rem"},children:"Width (cm)"}),(0,en.jsx)("input",{type:"number",name:"width",value:s.width,onChange:w,min:"1",step:"0.1",style:{width:"100%",padding:"0.5rem",border:"1px solid #d1d5db",borderRadius:"5px",fontSize:"0.9rem"}})]}),(0,en.jsxs)("div",{children:[(0,en.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",color:"#374151",fontSize:"0.9rem"},children:"Height (cm)"}),(0,en.jsx)("input",{type:"number",name:"height",value:s.height,onChange:w,min:"1",step:"0.1",style:{width:"100%",padding:"0.5rem",border:"1px solid #d1d5db",borderRadius:"5px",fontSize:"0.9rem"}})]}),(0,en.jsxs)("div",{children:[(0,en.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",color:"#374151",fontSize:"0.9rem"},children:"Value (USD)"}),(0,en.jsx)("input",{type:"number",name:"value",value:s.value,onChange:w,min:"1",step:"0.01",style:{width:"100%",padding:"0.5rem",border:"1px solid #d1d5db",borderRadius:"5px",fontSize:"0.9rem"}})]})]}),(0,en.jsx)("div",{style:{marginBottom:"1.5rem"},children:(0,en.jsx)("button",{onClick:async()=>{if(s.destination_state){c(!0),f("");try{const e=await Xr.post(`${y}/api/shipping/estimate`,{origin_city:"Monrovia",destination_state:s.destination_state,weight:parseFloat(s.weight),length:parseFloat(s.length),width:parseFloat(s.width),height:parseFloat(s.height),value:parseFloat(s.value)});e.data.success?(p(e.data.estimates),i&&i(e.data.estimates)):f("Failed to calculate shipping rates")}catch(m){var e,t;console.error("Shipping calculation error:",m),f((null===(e=m.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.detail)||"Failed to calculate shipping rates")}c(!1)}else f("Please select a destination state")},disabled:d,style:{padding:"0.75rem 1.5rem",backgroundColor:d?"#9ca3af":"#dc2626",color:"white",border:"none",borderRadius:"5px",fontSize:"0.9rem",cursor:d?"not-allowed":"pointer",transition:"background-color 0.3s"},children:d?"Calculating...":"\ud83d\udcca Calculate Shipping Rates"})}),m&&(0,en.jsx)("div",{style:{background:"#fef2f2",color:"#dc2626",padding:"0.75rem",borderRadius:"5px",marginBottom:"1rem",border:"1px solid #fecaca",fontSize:"0.9rem"},children:m}),u.length>0&&(0,en.jsxs)("div",{children:[(0,en.jsx)("h4",{style:{marginBottom:"1rem",color:"#1f2937"},children:"Shipping Options"}),(0,en.jsx)("div",{style:{display:"grid",gap:"0.75rem"},children:u.map((e,t)=>(0,en.jsxs)("div",{style:{border:"1px solid #e5e7eb",borderRadius:"8px",padding:"1rem",background:"#f9fafb"},children:[(0,en.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"},children:[(0,en.jsxs)("div",{children:[(0,en.jsx)("strong",{style:{color:"#1f2937",fontSize:"1rem"},children:e.service}),(0,en.jsx)("div",{style:{color:"#6b7280",fontSize:"0.8rem",textTransform:"uppercase"},children:e.carrier})]}),(0,en.jsxs)("div",{style:{textAlign:"right"},children:[(0,en.jsx)("div",{style:{fontSize:"1.1rem",fontWeight:"bold",color:"#dc2626"},children:j(e.total_cost)}),(0,en.jsxs)("div",{style:{color:"#6b7280",fontSize:"0.8rem"},children:[e.transit_days," business days"]})]})]}),(0,en.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.5rem",fontSize:"0.8rem",color:"#6b7280"},children:[(0,en.jsxs)("div",{children:["Shipping: ",j(e.shipping_cost)]}),(0,en.jsxs)("div",{children:["Customs: ",j(e.customs_duties)]})]})]},t))}),(0,en.jsxs)("div",{style:{marginTop:"1rem",padding:"0.75rem",background:"#fef3c7",borderRadius:"5px",fontSize:"0.8rem",color:"#92400e",border:"1px solid #fbbf24"},children:["\u26a0\ufe0f ",(0,en.jsx)("strong",{children:"Disclaimer:"})," These are estimates only. Final costs may vary based on actual package contents and customs assessment."]})]})]})},vn=()=>{const[e,t]=(0,a.useState)({name:"",description:"",price:"",category:"",stock:"1",tags:"",weight:"",dimensions:{length:"",width:"",height:""}}),[r,n]=(0,a.useState)({images:[],video:null}),[o,i]=(0,a.useState)(!1),[s,l]=(0,a.useState)(""),d=ne(),c=e=>{const{name:r,value:n}=e.target;if(r.startsWith("dimensions.")){const e=r.split(".")[1];t(t=>({...t,dimensions:{...t.dimensions,[e]:n}}))}else t(e=>({...e,[r]:n}))};return(0,en.jsx)("div",{className:"page",children:(0,en.jsx)("div",{className:"container",style:{maxWidth:"800px",margin:"2rem auto"},children:(0,en.jsxs)("div",{style:{background:"white",padding:"2rem",borderRadius:"10px",boxShadow:"0 2px 10px rgba(0,0,0,0.1)"},children:[(0,en.jsx)("h2",{style:{textAlign:"center",marginBottom:"2rem",color:"#1f2937"},children:"Add New Product"}),s&&(0,en.jsx)("div",{style:{background:"#fef2f2",color:"#dc2626",padding:"0.75rem",borderRadius:"5px",marginBottom:"1rem",border:"1px solid #fecaca"},children:s}),(0,en.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),i(!0),l("");try{if(!e.name||!e.description||!e.price||!e.category)return l("Please fill in all required fields"),void i(!1);if(0===r.images.length)return l("Please upload at least one product image"),void i(!1);const t={name:e.name.trim(),description:e.description.trim(),price:parseFloat(e.price),category:e.category,stock:parseInt(e.stock)||1,tags:e.tags?e.tags.split(",").map(e=>e.trim()).filter(e=>e):[],weight:e.weight?parseFloat(e.weight):null,dimensions:e.dimensions.length||e.dimensions.width||e.dimensions.height?{length:parseFloat(e.dimensions.length)||0,width:parseFloat(e.dimensions.width)||0,height:parseFloat(e.dimensions.height)||0}:null,images:r.images,video:r.video},n=localStorage.getItem("auth_token"),o=await Xr.post("https://libtousa.com/api/products/",t,{headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"}});o.data.success?(alert("Product created successfully!"),d("/dashboard")):l(o.data.message||"Failed to create product")}catch(s){var n,o;console.error("Product creation error:",s),l((null===(n=s.response)||void 0===n||null===(o=n.data)||void 0===o?void 0:o.detail)||"Failed to create product. Please try again.")}i(!1)},children:[(0,en.jsxs)("div",{style:{marginBottom:"2rem"},children:[(0,en.jsx)("h3",{style:{marginBottom:"1rem",color:"#1f2937"},children:"Basic Information"}),(0,en.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,en.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",color:"#374151"},children:"Product Name *"}),(0,en.jsx)("input",{type:"text",name:"name",value:e.name,onChange:c,required:!0,placeholder:"Enter product name",style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"5px",fontSize:"1rem"}})]}),(0,en.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,en.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",color:"#374151"},children:"Description *"}),(0,en.jsx)("textarea",{name:"description",value:e.description,onChange:c,required:!0,rows:"4",placeholder:"Describe your product in detail",style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"5px",fontSize:"1rem",resize:"vertical"}})]}),(0,en.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[(0,en.jsxs)("div",{children:[(0,en.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",color:"#374151"},children:"Price (USD) *"}),(0,en.jsx)("input",{type:"number",step:"0.01",min:"0.01",name:"price",value:e.price,onChange:c,required:!0,placeholder:"0.00",style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"5px",fontSize:"1rem"}})]}),(0,en.jsxs)("div",{children:[(0,en.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",color:"#374151"},children:"Category *"}),(0,en.jsxs)("select",{name:"category",value:e.category,onChange:c,required:!0,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"5px",fontSize:"1rem"},children:[(0,en.jsx)("option",{value:"",children:"Select category"}),["electronics","fashion","home","books","sports","beauty","jewelry","crafts","food","other"].map(e=>(0,en.jsx)("option",{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e))]})]}),(0,en.jsxs)("div",{children:[(0,en.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",color:"#374151"},children:"Stock Quantity"}),(0,en.jsx)("input",{type:"number",min:"0",name:"stock",value:e.stock,onChange:c,placeholder:"1",style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"5px",fontSize:"1rem"}})]})]}),(0,en.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,en.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",color:"#374151"},children:"Tags (comma-separated)"}),(0,en.jsx)("input",{type:"text",name:"tags",value:e.tags,onChange:c,placeholder:"handmade, traditional, authentic",style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"5px",fontSize:"1rem"}})]})]}),(0,en.jsxs)("div",{style:{marginBottom:"2rem"},children:[(0,en.jsx)("h3",{style:{marginBottom:"1rem",color:"#1f2937"},children:"Shipping Information"}),(0,en.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,en.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",color:"#374151"},children:"Weight (kg)"}),(0,en.jsx)("input",{type:"number",step:"0.01",min:"0",name:"weight",value:e.weight,onChange:c,placeholder:"0.00",style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"5px",fontSize:"1rem"}})]}),(0,en.jsxs)("div",{children:[(0,en.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",color:"#374151"},children:"Dimensions (cm)"}),(0,en.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"1rem"},children:[(0,en.jsx)("input",{type:"number",step:"0.1",min:"0",name:"dimensions.length",value:e.dimensions.length,onChange:c,placeholder:"Length",style:{padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"5px",fontSize:"1rem"}}),(0,en.jsx)("input",{type:"number",step:"0.1",min:"0",name:"dimensions.width",value:e.dimensions.width,onChange:c,placeholder:"Width",style:{padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"5px",fontSize:"1rem"}}),(0,en.jsx)("input",{type:"number",step:"0.1",min:"0",name:"dimensions.height",value:e.dimensions.height,onChange:c,placeholder:"Height",style:{padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"5px",fontSize:"1rem"}})]})]})]}),(0,en.jsx)(bn,{onUploadComplete:e=>{n(e)},existingImages:r.images,existingVideo:r.video}),(0,en.jsxs)("div",{style:{marginBottom:"2rem"},children:[(0,en.jsx)("h3",{style:{marginBottom:"1rem",color:"#1f2937"},children:"Shipping Information"}),(0,en.jsx)("p",{style:{color:"#6b7280",marginBottom:"1rem",fontSize:"0.9rem"},children:"Preview shipping costs for potential buyers. This helps customers understand total costs before purchasing."}),(0,en.jsx)(yn,{product:{weight:parseFloat(e.weight)||1,dimensions:{length:parseFloat(e.dimensions.length)||10,width:parseFloat(e.dimensions.width)||10,height:parseFloat(e.dimensions.height)||10},price:parseFloat(e.price)||100}})]}),(0,en.jsx)("div",{style:{textAlign:"center",marginTop:"2rem"},children:(0,en.jsx)("button",{type:"submit",disabled:o,style:{padding:"0.75rem 2rem",backgroundColor:o?"#9ca3af":"#dc2626",color:"white",border:"none",borderRadius:"5px",fontSize:"1rem",cursor:o?"not-allowed":"pointer",transition:"background-color 0.3s"},children:o?"Creating Product...":"Create Product"})})]})]})})})},wn=()=>{const[e,t]=(0,a.useState)([]),[r,n]=(0,a.useState)(null),[o,i]=(0,a.useState)(!0),s="https://libtousa.com";(0,a.useEffect)(()=>{l()},[]);const l=async()=>{try{console.log("Loading shipping info from:",s);const[e,r]=await Promise.all([Xr.get(`${s}/api/shipping/carriers`),Xr.get(`${s}/api/shipping/zones`)]);console.log("Carriers response:",e.data),console.log("Zones response:",r.data),e.data.success?t(Object.entries(e.data.carriers)):console.error("Invalid carriers response:",e.data),r.data.success?n(r.data):console.error("Invalid zones response:",r.data)}catch(e){console.error("Failed to load shipping information:",e),t([]),n({origin_zones:{country:"Liberia",major_cities:[]},destination_zones:{country:"United States",states:[]}})}finally{i(!1)}};return o?(0,en.jsx)("div",{className:"page",children:(0,en.jsx)("div",{className:"container",children:(0,en.jsx)("div",{style:{textAlign:"center",padding:"4rem 0"},children:(0,en.jsx)("p",{children:"Loading shipping information..."})})})}):(0,en.jsx)("div",{className:"page",children:(0,en.jsxs)("div",{className:"container",children:[(0,en.jsxs)("div",{style:{marginBottom:"2rem"},children:[(0,en.jsx)("h1",{style:{textAlign:"center",marginBottom:"1rem",color:"#1f2937"},children:"International Shipping Information"}),(0,en.jsx)("p",{style:{textAlign:"center",color:"#6b7280",maxWidth:"600px",margin:"0 auto"},children:"Learn about our shipping services from Liberia to the United States. Get real-time rates and calculate total costs including customs duties."})]}),(0,en.jsx)(yn,{}),r&&(0,en.jsxs)("div",{style:{background:"white",padding:"2rem",borderRadius:"10px",boxShadow:"0 2px 10px rgba(0,0,0,0.1)",marginBottom:"2rem"},children:[(0,en.jsx)("h3",{style:{marginBottom:"1.5rem",color:"#1f2937"},children:"\ud83c\udf0d Supported Shipping Routes"}),(0,en.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"2rem"},children:[(0,en.jsxs)("div",{children:[(0,en.jsxs)("h4",{style:{color:"#dc2626",marginBottom:"1rem"},children:["From: ",r.origin_zones.country]}),(0,en.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:r.origin_zones.major_cities.map(e=>(0,en.jsx)("span",{style:{background:"#fef2f2",color:"#dc2626",padding:"0.25rem 0.5rem",borderRadius:"4px",fontSize:"0.8rem",border:"1px solid #fecaca"},children:e},e))})]}),(0,en.jsxs)("div",{children:[(0,en.jsxs)("h4",{style:{color:"#dc2626",marginBottom:"1rem"},children:["To: ",r.destination_zones.country]}),(0,en.jsxs)("p",{style:{color:"#6b7280",fontSize:"0.9rem"},children:["All 50 states plus Washington D.C. (",r.destination_zones.states.length," destinations)"]}),(0,en.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.25rem",marginTop:"0.5rem"},children:[r.destination_zones.states.slice(0,10).map(e=>(0,en.jsx)("span",{style:{background:"#eff6ff",color:"#1d4ed8",padding:"0.15rem 0.3rem",borderRadius:"3px",fontSize:"0.7rem",border:"1px solid #bfdbfe"},children:e.code},e.code)),(0,en.jsxs)("span",{style:{color:"#6b7280",fontSize:"0.7rem",alignSelf:"center"},children:["+",r.destination_zones.states.length-10," more"]})]})]})]})]}),(0,en.jsxs)("div",{style:{background:"white",padding:"2rem",borderRadius:"10px",boxShadow:"0 2px 10px rgba(0,0,0,0.1)",marginBottom:"2rem"},children:[(0,en.jsx)("h3",{style:{marginBottom:"1.5rem",color:"#1f2937"},children:"\ud83d\udce6 Shipping Carriers"}),(0,en.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"1.5rem"},children:e.map(e=>{let[t,r]=e;return(0,en.jsxs)("div",{style:{border:"1px solid #e5e7eb",borderRadius:"8px",padding:"1.5rem",background:"#f9fafb"},children:[(0,en.jsx)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start",marginBottom:"1rem"},children:(0,en.jsxs)("div",{children:[(0,en.jsx)("h4",{style:{color:"#1f2937",marginBottom:"0.5rem"},children:r.name}),(0,en.jsx)("p",{style:{color:"#6b7280",fontSize:"0.9rem",marginBottom:"0.5rem"},children:r.description}),(0,en.jsxs)("div",{style:{display:"flex",gap:"1rem",fontSize:"0.8rem",color:"#6b7280"},children:[(0,en.jsxs)("span",{children:["\ud83d\udccd ",r.coverage]}),(0,en.jsxs)("span",{children:["\ud83d\udcf1 Tracking: ",r.tracking?"Yes":"No"]}),(0,en.jsxs)("span",{children:["\ud83d\udee1\ufe0f Insurance: ",!0===r.insurance?"Included":r.insurance]})]})]})}),(0,en.jsxs)("div",{children:[(0,en.jsx)("h5",{style:{color:"#374151",marginBottom:"0.5rem",fontSize:"0.9rem"},children:"Services:"}),(0,en.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"0.25rem"},children:r.services.map(e=>(0,en.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.8rem",color:"#6b7280"},children:[(0,en.jsx)("span",{children:e.name}),(0,en.jsxs)("span",{children:[e.transit_days," days"]})]},e.code))})]})]},t)})})]}),(0,en.jsxs)("div",{style:{background:"white",padding:"2rem",borderRadius:"10px",boxShadow:"0 2px 10px rgba(0,0,0,0.1)"},children:[(0,en.jsx)("h3",{style:{marginBottom:"1.5rem",color:"#1f2937"},children:"\ud83d\udccb Important Shipping Information"}),(0,en.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"2rem"},children:[(0,en.jsxs)("div",{children:[(0,en.jsx)("h4",{style:{color:"#dc2626",marginBottom:"0.5rem",fontSize:"1rem"},children:"\ud83c\udff7\ufe0f Customs & Duties"}),(0,en.jsxs)("ul",{style:{color:"#6b7280",fontSize:"0.9rem",lineHeight:"1.6",paddingLeft:"1rem"},children:[(0,en.jsx)("li",{children:"All shipments are subject to U.S. customs inspection"}),(0,en.jsx)("li",{children:"Duties and taxes are estimated (typically 5-8% of value)"}),(0,en.jsx)("li",{children:"Recipients are responsible for customs charges"}),(0,en.jsx)("li",{children:"Proper documentation is required for all shipments"})]})]}),(0,en.jsxs)("div",{children:[(0,en.jsx)("h4",{style:{color:"#dc2626",marginBottom:"0.5rem",fontSize:"1rem"},children:"\ud83d\udce6 Packaging Requirements"}),(0,en.jsxs)("ul",{style:{color:"#6b7280",fontSize:"0.9rem",lineHeight:"1.6",paddingLeft:"1rem"},children:[(0,en.jsx)("li",{children:"Items must be securely packaged for international shipping"}),(0,en.jsx)("li",{children:"Fragile items require special handling surcharges"}),(0,en.jsx)("li",{children:"Maximum package dimensions vary by carrier"}),(0,en.jsx)("li",{children:"Weight limits apply (typically 30kg per package)"})]})]}),(0,en.jsxs)("div",{children:[(0,en.jsx)("h4",{style:{color:"#dc2626",marginBottom:"0.5rem",fontSize:"1rem"},children:"\ud83d\udeab Prohibited Items"}),(0,en.jsxs)("ul",{style:{color:"#6b7280",fontSize:"0.9rem",lineHeight:"1.6",paddingLeft:"1rem"},children:[(0,en.jsx)("li",{children:"Hazardous materials and chemicals"}),(0,en.jsx)("li",{children:"Perishable food items"}),(0,en.jsx)("li",{children:"Live animals or plants"}),(0,en.jsx)("li",{children:"Firearms and weapons"})]})]}),(0,en.jsxs)("div",{children:[(0,en.jsx)("h4",{style:{color:"#dc2626",marginBottom:"0.5rem",fontSize:"1rem"},children:"\u23f1\ufe0f Transit Times"}),(0,en.jsxs)("ul",{style:{color:"#6b7280",fontSize:"0.9rem",lineHeight:"1.6",paddingLeft:"1rem"},children:[(0,en.jsx)("li",{children:"Express services: 1-3 business days"}),(0,en.jsx)("li",{children:"Standard services: 3-6 business days"}),(0,en.jsx)("li",{children:"Economy services: 5-10 business days"}),(0,en.jsx)("li",{children:"Delays may occur due to customs processing"})]})]})]}),(0,en.jsx)("div",{style:{marginTop:"2rem",padding:"1rem",background:"#eff6ff",borderRadius:"8px",border:"1px solid #bfdbfe"},children:(0,en.jsxs)("p",{style:{color:"#1e40af",fontSize:"0.9rem",margin:0},children:["\ud83d\udca1 ",(0,en.jsx)("strong",{children:"Tip:"})," For the most accurate shipping rates and delivery times, use our shipping calculator above with your specific package dimensions and destination."]})})]})]})})},jn=e=>{var t;const[r,n]=(0,a.useState)(null),[o,i]=(0,a.useState)(!1),[s,l]=(0,a.useState)({}),[d,c]=(0,a.useState)(new Set),[u,p]=(0,a.useState)({}),m=(0,a.useRef)(null),f=(0,a.useRef)(null),h=(null===(t="https://libtousa.com")?void 0:t.replace("http","ws"))||"ws://localhost:8001",g=(0,a.useCallback)(()=>{if(e&&!m.current)try{const t=new WebSocket(`${h}/api/chat/ws/${e}`);m.current=t,t.onopen=()=>{console.log("WebSocket connected"),i(!0),n(t),f.current&&(clearTimeout(f.current),f.current=null)},t.onmessage=e=>{try{const t=JSON.parse(e.data);x(t)}catch(t){console.error("Error parsing WebSocket message:",t)}},t.onclose=()=>{console.log("WebSocket disconnected"),i(!1),n(null),m.current=null,f.current=setTimeout(()=>{g()},3e3)},t.onerror=e=>{console.error("WebSocket error:",e)}}catch(t){console.error("Error creating WebSocket connection:",t)}},[e,h]),x=e=>{switch(e.type){case"new_message":const{message:t,chat_id:r}=e.data;l(e=>({...e,[r]:[...e[r]||[],t]}));break;case"user_online":c(t=>new Set([...t,e.data.user_id]));break;case"user_offline":c(t=>{const r=new Set(t);return r.delete(e.data.user_id),r});break;case"user_typing":const{user_id:n,chat_id:o,is_typing:a}=e.data;p(e=>({...e,[o]:a?[...e[o]||[],n]:(e[o]||[]).filter(e=>e!==n)}));break;case"message_read":console.log("Message read:",e.data);break;default:console.log("Unknown WebSocket message type:",e.type)}},b=(0,a.useCallback)((e,t)=>{r&&o&&r.send(JSON.stringify({type:e,...t}))},[r,o]),y=(0,a.useCallback)(e=>{b("subscribe_chat",{chat_id:e})},[b]),v=(0,a.useCallback)(e=>{b("unsubscribe_chat",{chat_id:e})},[b]),w=(0,a.useCallback)((e,t)=>{b("typing",{chat_id:e,is_typing:t})},[b]),j=(0,a.useCallback)((e,t)=>{l(r=>({...r,[e]:[...r[e]||[],t]}))},[]),S=(0,a.useCallback)((e,t)=>{l(r=>({...r,[e]:t}))},[]);return(0,a.useEffect)(()=>(e&&g(),()=>{m.current&&m.current.close(),f.current&&clearTimeout(f.current)}),[e,g]),{isConnected:o,messages:s,onlineUsers:d,typingUsers:u,subscribeToChat:y,unsubscribeFromChat:v,sendTypingIndicator:w,addMessageToChat:j,initializeChatMessages:S}},Sn=e=>{let{currentUserId:t,onChatSelect:r,selectedChatId:n}=e;const[o,i]=(0,a.useState)([]),[s,l]=(0,a.useState)(!0),[d,c]=(0,a.useState)(0),u=jn(t);(0,a.useEffect)(()=>{p()},[]),(0,a.useEffect)(()=>{const e=setInterval(()=>{p()},3e4);return()=>clearInterval(e)},[]);const p=async()=>{try{const e=localStorage.getItem("auth_token"),t=await Xr.get("https://libtousa.com/api/chat/list",{headers:{Authorization:`Bearer ${e}`}});t.data.chats&&(i(t.data.chats),c(t.data.unread_total))}catch(e){console.error("Error loading chats:",e)}finally{l(!1)}},m=e=>{const t=new Date(e),r=(new Date-t)/36e5;return r<1?"Just now":r<24?t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):r<168?t.toLocaleDateString([],{weekday:"short"}):t.toLocaleDateString([],{month:"short",day:"numeric"})},f=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:40;return e?e.length<=t?e:e.substring(0,t)+"...":"No messages yet"};return s?(0,en.jsx)("div",{style:{padding:"2rem",textAlign:"center",color:"#6b7280"},children:"Loading chats..."}):0===o.length?(0,en.jsxs)("div",{style:{padding:"2rem",textAlign:"center",color:"#6b7280"},children:[(0,en.jsx)("div",{style:{marginBottom:"1rem",fontSize:"3rem"},children:"\ud83d\udcac"}),(0,en.jsx)("h3",{style:{color:"#374151",marginBottom:"0.5rem"},children:"No conversations yet"}),(0,en.jsx)("p",{children:"Start chatting by contacting a seller on a product page!"})]}):(0,en.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"10px",boxShadow:"0 2px 10px rgba(0,0,0,0.1)",overflow:"hidden"},children:[(0,en.jsxs)("div",{style:{padding:"1rem",borderBottom:"1px solid #e5e7eb",backgroundColor:"#f9fafb"},children:[(0,en.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,en.jsx)("h3",{style:{margin:0,color:"#1f2937"},children:"Messages"}),d>0&&(0,en.jsx)("span",{style:{backgroundColor:"#dc2626",color:"white",borderRadius:"50%",padding:"0.25rem 0.5rem",fontSize:"0.8rem",fontWeight:"bold",minWidth:"20px",textAlign:"center"},children:d})]}),(0,en.jsxs)("div",{style:{fontSize:"0.8rem",color:"#6b7280",marginTop:"0.25rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,en.jsx)("span",{style:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:u.isConnected?"#10b981":"#ef4444"}}),u.isConnected?"Connected":"Connecting..."]})]}),(0,en.jsx)("div",{style:{maxHeight:"400px",overflowY:"auto"},children:o.map(e=>{var o,a;const i=(e=>e.participants.find(e=>e.user_id!==t))(e),s=(e=>e.unread_count[t]||0)(e),l=n===e.id,d=u.onlineUsers.has(null===i||void 0===i?void 0:i.user_id);return(0,en.jsx)("div",{onClick:()=>r(e),style:{padding:"1rem",borderBottom:"1px solid #f3f4f6",cursor:"pointer",backgroundColor:l?"#fef2f2":"white",transition:"background-color 0.2s",":hover":{backgroundColor:"#f9fafb"}},onMouseEnter:e=>{l||(e.target.style.backgroundColor="#f9fafb")},onMouseLeave:e=>{l||(e.target.style.backgroundColor="white")},children:(0,en.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.75rem"},children:[(0,en.jsxs)("div",{style:{width:"45px",height:"45px",borderRadius:"50%",backgroundColor:"#dc2626",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:"bold",fontSize:"1.1rem",flexShrink:0,position:"relative"},children:[null===i||void 0===i||null===(o=i.user_name)||void 0===o||null===(a=o.charAt(0))||void 0===a?void 0:a.toUpperCase(),d&&(0,en.jsx)("div",{style:{position:"absolute",bottom:"2px",right:"2px",width:"12px",height:"12px",backgroundColor:"#10b981",borderRadius:"50%",border:"2px solid white"}})]}),(0,en.jsxs)("div",{style:{flex:1,minWidth:0},children:[(0,en.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"0.25rem"},children:[(0,en.jsx)("div",{style:{fontWeight:s>0?"bold":"normal",color:"#1f2937",fontSize:"0.95rem"},children:null===i||void 0===i?void 0:i.user_name}),(0,en.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.updated_at&&(0,en.jsx)("span",{style:{fontSize:"0.7rem",color:"#9ca3af"},children:m(e.updated_at)}),s>0&&(0,en.jsx)("span",{style:{backgroundColor:"#dc2626",color:"white",borderRadius:"50%",padding:"0.15rem 0.4rem",fontSize:"0.7rem",fontWeight:"bold",minWidth:"16px",textAlign:"center"},children:s})]})]}),e.product_name&&(0,en.jsxs)("div",{style:{fontSize:"0.75rem",color:"#dc2626",marginBottom:"0.25rem",fontWeight:"500"},children:["\ud83d\udce6 ",e.product_name]}),(0,en.jsx)("div",{style:{fontSize:"0.8rem",color:"#6b7280",fontWeight:s>0?"500":"normal"},children:e.last_message?(0,en.jsxs)(en.Fragment,{children:[e.last_message.sender_id===t&&(0,en.jsx)("span",{style:{color:"#9ca3af"},children:"You: "}),"text"===e.last_message.message_type?f(e.last_message.content.text):"image"===e.last_message.message_type?"\ud83d\udcf7 Photo":"video"===e.last_message.message_type?"\ud83c\udfa5 Video":"\ud83d\udcce File"]}):(0,en.jsx)("span",{style:{fontStyle:"italic"},children:"No messages yet"})})]})]})},e.id)})})]})},kn=e=>{let{message:t,currentUserId:r,onReply:n}=e;const o=t.sender_id===r,a=new Date(t.timestamp);return(0,en.jsx)("div",{style:{display:"flex",justifyContent:o?"flex-end":"flex-start",marginBottom:"1rem"},children:(0,en.jsxs)("div",{style:{maxWidth:"70%",backgroundColor:o?"#dc2626":"#f3f4f6",color:o?"white":"#1f2937",padding:"0.75rem 1rem",borderRadius:"18px",borderBottomRightRadius:o?"4px":"18px",borderBottomLeftRadius:o?"18px":"4px",boxShadow:"0 2px 5px rgba(0,0,0,0.1)"},children:[t.reply_to&&(0,en.jsx)("div",{style:{backgroundColor:"rgba(255,255,255,0.2)",padding:"0.25rem 0.5rem",borderRadius:"8px",marginBottom:"0.5rem",fontSize:"0.8rem",opacity:.8},children:"\u21a9\ufe0f Replying to message"}),!o&&(0,en.jsx)("div",{style:{fontSize:"0.75rem",fontWeight:"bold",marginBottom:"0.25rem",opacity:.8},children:t.sender_name}),(0,en.jsxs)("div",{children:["text"===t.message_type&&(0,en.jsx)("div",{style:{wordWrap:"break-word"},children:t.content.text}),"image"===t.message_type&&(0,en.jsxs)("div",{children:[(0,en.jsx)("img",{src:t.content.media_url,alt:"Shared image",style:{maxWidth:"100%",maxHeight:"200px",borderRadius:"8px",marginBottom:"0.5rem"}}),t.content.text&&(0,en.jsx)("div",{style:{marginTop:"0.5rem"},children:t.content.text})]}),"video"===t.message_type&&(0,en.jsxs)("div",{children:[(0,en.jsx)("video",{src:t.content.media_url,controls:!0,style:{maxWidth:"100%",maxHeight:"200px",borderRadius:"8px",marginBottom:"0.5rem"}}),t.content.text&&(0,en.jsx)("div",{style:{marginTop:"0.5rem"},children:t.content.text})]})]}),(0,en.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"0.5rem",fontSize:"0.7rem",opacity:.7},children:[(0,en.jsx)("span",{children:(i=a,i.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))}),(0,en.jsx)("div",{style:{display:"flex",gap:"0.5rem"},children:(0,en.jsx)("button",{onClick:()=>n&&n(t),style:{background:"none",border:"none",color:"inherit",cursor:"pointer",fontSize:"0.7rem",opacity:.7},children:"\u21a9\ufe0f"})})]})]})});var i},Cn=e=>{var t;let{chat:r,currentUserId:n,onClose:o}=e;const[i,s]=(0,a.useState)([]),[l,d]=(0,a.useState)(""),[c,u]=(0,a.useState)(!0),[p,m]=(0,a.useState)(!1),[f,h]=(0,a.useState)(null),[g,x]=(0,a.useState)(!1),b=(0,a.useRef)(null),y=(0,a.useRef)(null),v=(0,a.useRef)(null),w=jn(n),j="https://libtousa.com";(0,a.useEffect)(()=>(r&&(S(),w.subscribeToChat(r.id)),()=>{r&&w.unsubscribeFromChat(r.id)}),[null===r||void 0===r?void 0:r.id]),(0,a.useEffect)(()=>{r&&w.messages[r.id]&&s(e=>{const t=w.messages[r.id],n=new Set(e.map(e=>e.id)),o=t.filter(e=>!n.has(e.id));return[...e,...o]})},[w.messages,null===r||void 0===r?void 0:r.id]),(0,a.useEffect)(()=>{k()},[i]);const S=async()=>{try{const e=localStorage.getItem("auth_token"),t=await Xr.get(`${j}/api/chat/${r.id}/messages`,{headers:{Authorization:`Bearer ${e}`}});t.data.messages&&(s(t.data.messages),w.initializeChatMessages(r.id,t.data.messages))}catch(e){console.error("Error loading messages:",e)}finally{u(!1)}},k=()=>{var e;null===(e=b.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},C=async()=>{if(l.trim()&&!p){m(!0);try{const t=localStorage.getItem("auth_token"),n={chat_id:r.id,message_type:"text",content:{text:l.trim()},reply_to:(null===f||void 0===f?void 0:f.id)||null},o=await Xr.post(`${j}/api/chat/send-message`,n,{headers:{Authorization:`Bearer ${t}`}});if(o.data.success){var e;const t=o.data.message_data;s(e=>[...e,t]),w.addMessageToChat(r.id,t),d(""),h(null),null===(e=y.current)||void 0===e||e.focus()}}catch(t){console.error("Error sending message:",t),alert("Failed to send message. Please try again.")}finally{m(!1)}}},N=e=>{var t;h(e),null===(t=y.current)||void 0===t||t.focus()},_=r.participants.find(e=>e.user_id!==n),E=w.onlineUsers.has(null===_||void 0===_?void 0:_.user_id),R=(w.typingUsers[r.id]||[]).some(e=>e!==n);return r?(0,en.jsxs)("div",{style:{display:"flex",flexDirection:"column",height:"600px",backgroundColor:"white",borderRadius:"10px",boxShadow:"0 4px 15px rgba(0,0,0,0.1)",overflow:"hidden"},children:[(0,en.jsxs)("div",{style:{padding:"1rem",borderBottom:"1px solid #e5e7eb",backgroundColor:"#f9fafb",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,en.jsxs)("div",{children:[(0,en.jsx)("h3",{style:{margin:0,color:"#1f2937"},children:null===_||void 0===_?void 0:_.user_name}),(0,en.jsxs)("div",{style:{fontSize:"0.8rem",color:"#6b7280",display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,en.jsx)("span",{style:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:E?"#10b981":"#6b7280"}}),E?"Online":"Offline",r.product_name&&(0,en.jsxs)(en.Fragment,{children:[(0,en.jsx)("span",{children:"\u2022"}),(0,en.jsxs)("span",{children:["Re: ",r.product_name]})]})]})]}),(0,en.jsx)("button",{onClick:o,style:{background:"none",border:"none",fontSize:"1.5rem",cursor:"pointer",color:"#6b7280"},children:"\xd7"})]}),(0,en.jsxs)("div",{style:{flex:1,padding:"1rem",overflowY:"auto",backgroundColor:"#ffffff"},children:[c?(0,en.jsx)("div",{style:{textAlign:"center",padding:"2rem",color:"#6b7280"},children:"Loading messages..."}):0===i.length?(0,en.jsx)("div",{style:{textAlign:"center",padding:"2rem",color:"#6b7280"},children:"No messages yet. Start the conversation!"}):(0,en.jsxs)(en.Fragment,{children:[i.map(e=>(0,en.jsx)(kn,{message:e,currentUserId:n,onReply:N},e.id)),R&&(0,en.jsx)("div",{style:{display:"flex",justifyContent:"flex-start",marginBottom:"1rem"},children:(0,en.jsxs)("div",{style:{backgroundColor:"#f3f4f6",color:"#6b7280",padding:"0.5rem 1rem",borderRadius:"18px",fontSize:"0.9rem",fontStyle:"italic"},children:[null===_||void 0===_?void 0:_.user_name," is typing..."]})})]}),(0,en.jsx)("div",{ref:b})]}),f&&(0,en.jsxs)("div",{style:{padding:"0.5rem 1rem",backgroundColor:"#f3f4f6",borderTop:"1px solid #e5e7eb",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,en.jsxs)("div",{style:{fontSize:"0.8rem",color:"#6b7280"},children:["\u21a9\ufe0f Replying to: ",null===(t=f.content.text)||void 0===t?void 0:t.substring(0,50),"..."]}),(0,en.jsx)("button",{onClick:()=>h(null),style:{background:"none",border:"none",cursor:"pointer",color:"#6b7280"},children:"\xd7"})]}),(0,en.jsx)("div",{style:{padding:"1rem",borderTop:"1px solid #e5e7eb",backgroundColor:"#f9fafb"},children:(0,en.jsxs)("div",{style:{display:"flex",gap:"0.5rem",alignItems:"flex-end"},children:[(0,en.jsx)("button",{onClick:()=>x(!g),style:{padding:"0.5rem",backgroundColor:"#dc2626",color:"white",border:"none",borderRadius:"50%",cursor:"pointer",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center"},children:"\ud83d\udcce"}),(0,en.jsx)("textarea",{ref:y,value:l,onChange:e=>{d(e.target.value),w.sendTypingIndicator(r.id,!0),v.current&&clearTimeout(v.current),v.current=setTimeout(()=>{w.sendTypingIndicator(r.id,!1)},1e3)},onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),C())},placeholder:"Type a message...",rows:"1",style:{flex:1,padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"20px",resize:"none",outline:"none",fontSize:"0.9rem",maxHeight:"100px"}}),(0,en.jsx)("button",{onClick:C,disabled:!l.trim()||p,style:{padding:"0.5rem",backgroundColor:!l.trim()||p?"#9ca3af":"#dc2626",color:"white",border:"none",borderRadius:"50%",cursor:!l.trim()||p?"not-allowed":"pointer",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center"},children:p?"\u23f3":"\u27a4"})]})})]}):null},Nn=()=>{const[e,t]=(0,a.useState)(null),[r,n]=(0,a.useState)(null),[o,i]=(0,a.useState)(window.innerWidth<768),s=ne();(0,a.useEffect)(()=>{l();const e=()=>{i(window.innerWidth<768)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);const l=()=>{const e=localStorage.getItem("auth_token"),r=localStorage.getItem("user_data");if(e&&r)try{const e=JSON.parse(r);t(e)}catch(n){console.error("Error parsing user data:",n),s("/login")}else s("/login")},d=e=>{n(e)},c=()=>{n(null)};return e?(0,en.jsx)("div",{className:"page",children:(0,en.jsxs)